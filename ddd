import { CreateEPGSubscriptionRequest, CorporateHeaders, Card } from './create-jpg-suscrption-request';

function buildRequestToDropSuscription(customerId: ConsultaClienteEPGI): CreateEPGSubscriptionRequest {
  const request: CreateEPGSubscriptionRequest = {
    corporateHeaders: {
      txRef: 'ASD',
      cmRef: 'ASD',
      country: 'ARG',
      version: '1.0'
    },
    efxCustomerID: customerId.efxCustomerID,
    card: {
      cardTokenId: customerId.card.cardTokenId,
      cardType: customerId.card.cardType
    },
    cuitNumber: customerId.cuitNumber
  };

  return request;
}

describe('buildRequestToDropSuscription', () => {
  it('should build the request to drop subscription', () => {
    const customerId: ConsultaClienteEPGI = {
      efxCustomerID: 'efx123',
      card: {
        cardTokenId: 'token123',
        cardType: 'VISA'
      },
      cuitNumber: '123456789'
    };

    const expectedRequest: CreateEPGSubscriptionRequest = {
      corporateHeaders: {
        txRef: 'ASD',
        cmRef: 'ASD',
        country: 'ARG',
        version: '1.0'
      },
      efxCustomerID: 'efx123',
      card: {
        cardTokenId: 'token123',
        cardType: 'VISA'
      },
      cuitNumber: '123456789'
    };

    const result = buildRequestToDropSuscription(customerId);

    expect(result).toEqual(expectedRequest);
  });
});





